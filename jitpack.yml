jdk:
  - openjdk17

before_install:
  - echo "sdk.dir=$ANDROID_HOME" > local.properties
  - yes | ${ANDROID_HOME}/cmdline-tools/latest/bin/sdkmanager --licenses > /dev/null || true
  - ${ANDROID_HOME}/cmdline-tools/latest/bin/sdkmanager "platforms;android-35" "build-tools;35.0.0" "ndk;26.2.11394342" "platform-tools"

install:
  - chmod +x gradlew
  - OWNER=$(git config --get remote.origin.url | sed -E 's#.*[:/ ]([^/]+)/[^/]+(\.git)?$#\1#')
  - REPO=$(git config --get remote.origin.url | sed -E 's#.*/([^/]+?)(\.git)?$#\1#')
  - GROUP="com.github.${OWNER}.${REPO}"
  - echo "Using GROUP=${GROUP} VERSION=${VERSION} (skipSigning)"
  - ./gradlew --no-daemon -x test -x lint -PskipSigning=true -PGROUP=${GROUP} -PVERSION_NAME=${VERSION} publishToMavenLocal
